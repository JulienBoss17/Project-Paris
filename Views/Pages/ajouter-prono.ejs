<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajouter un prono</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <%- include('../Partials/navbar') %>

    <div class="container mt-5">
        <h1 class="mb-4">ðŸŽ¯ Nouveau Pronostic</h1>
        
        <form action="/ajouter" method="POST">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div>
                    <label>Type de Pari</label>
                    <select name="typePari">
                        <option value="Simple">Pari Simple</option>
                        <option value="CombinÃ©">Pari CombinÃ©</option>
                    </select>
                </div>
                <div>
                    <label>Date du pari</label>
                    <input type="date" name="date" value="<%= new Date().toISOString().split('T')[0] %>" required>
                </div>
            </div>

            <hr style="margin: 2rem 0; border: 0; border-top: 1px solid var(--border-color);">

            <div id="matchs">
                <div class="match" style="display: block; margin-bottom: 2rem;">
                    <h3 style="font-size: 1.1rem; color: var(--primary);">Match #1</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div>
                            <label>Ã‰quipe Domicile</label>
                            <input type="text" name="matchs[0][equipeDomicile]" placeholder="ex: PSG" required>
                        </div>
                        <div>
                            <label>Ã‰quipe ExtÃ©rieure</label>
                            <input type="text" name="matchs[0][equipeExterieur]" placeholder="ex: OM" required>
                        </div>
                        <div>
                            <label>Date du match</label>
                            <input type="date" name="matchs[0][date]" value="<%= new Date().toISOString().split('T')[0] %>" required>
                        </div>
                        <div>
                            <label>Type de PrÃ©diction</label>
                            <select name="matchs[0][typePrediction]">
                                <option value="1X2">1X2</option>
                                <option value="Score Exact">Score Exact</option>
                                <option value="Buteur">Buteur</option>
                                <option value="Handicap">Handicap</option>
                            </select>
                        </div>
                        <div>
                            <label>PrÃ©diction</label>
                            <input type="text" name="matchs[0][prediction]" placeholder="ex: Victoire PSG" required>
                        </div>
                        <div>
                            <label>Cote Match</label>
                            <input type="number" name="matchs[0][cote]" step="0.01" placeholder="1.85" required>
                        </div>
                    </div>
                </div>
            </div>

            <button type="button" class="btn" style="background: var(--primary-soft); color: var(--primary); margin-bottom: 2rem;" onclick="ajouterMatch()">
                + Ajouter un autre match
            </button>

            <div style="background: var(--bg-main); padding: 1.5rem; border-radius: var(--radius-md);">
                <label>Cote totale finale</label>
                <input type="number" name="cote" step="0.01" placeholder="Ex: 3.50" required>
                <p style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.5rem;">
                    Note : Pour un pari simple, indiquez la mÃªme cote que le match.
                </p>
            </div>

            <button type="submit" class="btn" style="width: 100%; margin-top: 2rem; font-size: 1.1rem;">
                ðŸš€ Publier le pronostic
            </button>
        </form>
    </div>

    <script>
        let index = 1;
        function ajouterMatch() {
            const container = document.getElementById("matchs");
            const div = document.createElement("div");
            div.className = "match";
            div.style.display = "block";
            div.style.marginBottom = "2rem";
            div.innerHTML = `
                <h3 style="font-size: 1.1rem; color: var(--primary);">Match #${index + 1}</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div><label>Ã‰quipe Domicile</label><input type="text" name="matchs[${index}][equipeDomicile]" required></div>
                    <div><label>Ã‰quipe ExtÃ©rieure</label><input type="text" name="matchs[${index}][equipeExterieur]" required></div>
                    <div><label>Date du match</label><input type="date" name="matchs[${index}][date]" value="<%= new Date().toISOString().split('T')[0] %>" required></div>
                    <div>
                        <label>Type de PrÃ©diction</label>
                        <select name="matchs[${index}][typePrediction]">
                            <option value="1X2">1X2</option>
                            <option value="Score Exact">Score Exact</option>
                            <option value="Buteur">Buteur</option>
                            <option value="Handicap">Handicap</option>
                        </select>
                    </div>
                    <div><label>PrÃ©diction</label><input type="text" name="matchs[${index}][prediction]" required></div>
                    <div><label>Cote Match</label><input type="number" name="matchs[${index}][cote]" step="0.01" required></div>
                </div>
            `;
            container.appendChild(div);
            index++;
        }
    </script>
</body>
</html>